{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/';\n\nexport const searchImages = async (text, page, pageSize) => {\n  if (text.trim().length == 0) {\n    throw 'Search value can not be null';\n  }\n  const response = await axios.get('api/', {\n    params: {\n      key: '48321806-d480a24496502db5d22ba5dda',\n      image_type: 'photo',\n      orientation: 'hotizontal',\n      safesearch: true,\n      q: text,\n      page: page,\n      per_page: pageSize,\n    },\n  });\n  return response;\n};\n","import { searchImages } from '/js/pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction createGalleryItem(item) {\n  return `<li>\n  <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n  <img class=\"gallery-image\" src=\"${item.previewURL}\" alt=\"${item.tags}\"/>\n  <ul class=\"statistic\">\n  <li>\n  <h3 class=\"statistic-title\">Likes</h3>\n  <p class=\"statistic-text\">${item.likes}</p>\n  </li>\n  <li>\n  <h3 class=\"statistic-title\">Views</h3>\n  <p class=\"statistic-text\">${item.views}</p>\n  </li>\n  <li>\n  <h3 class=\"statistic-title\">Comments</h3>\n  <p class=\"statistic-text\">${item.comments}</p>\n  </li>\n  <li>\n  <h3 class=\"statistic-title\"> Downloads</h3>\n  <p class=\"statistic-text\">${item.downloads}</p>\n  </li>\n  </ul>\n  </a>\n  </li>`;\n}\n\nexport const galleryOptiopns = {\n  searchString: '',\n  pageNumber: 1,\n  images: [],\n  totalHits: 0,\n  pageSize: 15,\n};\n\nexport async function renderGallery(gallery, options) {\n  await searchImages(\n    options.searchString,\n    options.pageNumber,\n    options.pageSize\n  ).then(response => {\n    const { data: data } = response;\n    if (data.hits.length == 0) {\n      throw 'Sorry, there are no images matching your search query. Please try again!';\n    }\n    options.images.push(...data.hits);\n    const galleryItems = options.images\n      .map(item => {\n        return createGalleryItem(item);\n      })\n      .join('');\n    gallery.innerHTML = galleryItems;\n    lightbox.refresh();\n    scrol(gallery.children[gallery.children.length - options.pageSize + 1]);\n    options.pageNumber += 1;\n    options.totalHits = data.totalHits;\n  });\n}\n\nfunction scrol(li) {\n  const rect = li.getBoundingClientRect();\n  window.scrollBy({\n    top: rect.bottom,\n    height: rect.height * 2,\n    behavior: 'smooth',\n  });\n}\n","import { renderGallery, galleryOptiopns } from './js/render-functions';\nimport iziToast from 'izitoast';\n\nconst form = document.querySelector('form');\nconst searchInut = document.querySelector('#search');\nconst loader = document.querySelector('.loader-wrapper');\nconst loadMoreBtn = document.querySelector('#load-more');\nconst gallery = document.querySelector('.gallery');\n\nfunction reset() {\n  galleryOptiopns.pageNumber = 1;\n  galleryOptiopns.images = [];\n  galleryOptiopns.searchString = searchInut.value;\n  gallery.innerHTML = '';\n  searchInut.classList.remove('error');\n}\n\nasync function createGallery() {\n  try {\n    loader.style.display = 'block';\n    await renderGallery(gallery, galleryOptiopns);\n    if (galleryOptiopns.images.length < galleryOptiopns.totalHits) {\n      loadMoreBtn.classList.remove('hidden');\n    } else {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error });\n    loadMoreBtn.classList.add('hidden');\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  reset();\n  createGallery();\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  createGallery();\n});\n"],"names":["axios","searchImages","text","page","pageSize","lightbox","SimpleLightbox","createGalleryItem","item","galleryOptiopns","renderGallery","gallery","options","response","data","galleryItems","scrol","li","rect","form","searchInut","loader","loadMoreBtn","reset","createGallery","iziToast","error","event"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,uBAElB,MAAMC,EAAe,MAAOC,EAAMC,EAAMC,IAAa,CAC1D,GAAIF,EAAK,OAAO,QAAU,EACxB,KAAM,+BAaR,OAXiB,MAAMF,EAAM,IAAI,OAAQ,CACvC,OAAQ,CACN,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,EAAGE,EACH,KAAMC,EACN,SAAUC,CACX,CACL,CAAG,CAEH,ECjBMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASC,EAAkBC,EAAM,CAC/B,MAAO;AAAA,kCACyBA,EAAK,aAAa;AAAA,oCAChBA,EAAK,UAAU,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA,8BAIxCA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,8BAIVA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,8BAIVA,EAAK,QAAQ;AAAA;AAAA;AAAA;AAAA,8BAIbA,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA,QAK5C,CAEO,MAAMC,EAAkB,CAC7B,aAAc,GACd,WAAY,EACZ,OAAQ,CAAE,EACV,UAAW,EACX,SAAU,EACZ,EAEO,eAAeC,EAAcC,EAASC,EAAS,CACpD,MAAMX,EACJW,EAAQ,aACRA,EAAQ,WACRA,EAAQ,QACZ,EAAI,KAAKC,GAAY,CACjB,KAAM,CAAE,KAAMC,CAAM,EAAGD,EACvB,GAAIC,EAAK,KAAK,QAAU,EACtB,KAAM,2EAERF,EAAQ,OAAO,KAAK,GAAGE,EAAK,IAAI,EAChC,MAAMC,EAAeH,EAAQ,OAC1B,IAAIJ,GACID,EAAkBC,CAAI,CAC9B,EACA,KAAK,EAAE,EACVG,EAAQ,UAAYI,EACpBV,EAAS,QAAO,EAChBW,EAAML,EAAQ,SAASA,EAAQ,SAAS,OAASC,EAAQ,SAAW,CAAC,CAAC,EACtEA,EAAQ,YAAc,EACtBA,EAAQ,UAAYE,EAAK,SAC7B,CAAG,CACH,CAEA,SAASE,EAAMC,EAAI,CACjB,MAAMC,EAAOD,EAAG,wBAChB,OAAO,SAAS,CACd,IAAKC,EAAK,OACV,OAAQA,EAAK,OAAS,EACtB,SAAU,QACd,CAAG,CACH,CCtEA,MAAMC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAc,SAAS,cAAc,YAAY,EACjDX,EAAU,SAAS,cAAc,UAAU,EAEjD,SAASY,GAAQ,CACfd,EAAgB,WAAa,EAC7BA,EAAgB,OAAS,GACzBA,EAAgB,aAAeW,EAAW,MAC1CT,EAAQ,UAAY,GACpBS,EAAW,UAAU,OAAO,OAAO,CACrC,CAEA,eAAeI,GAAgB,CAC7B,GAAI,CACFH,EAAO,MAAM,QAAU,QACvB,MAAMX,EAAcC,EAASF,CAAe,EACxCA,EAAgB,OAAO,OAASA,EAAgB,UAClDa,EAAY,UAAU,OAAO,QAAQ,GAErCA,EAAY,UAAU,IAAI,QAAQ,EAClCG,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,EAEJ,OAAQC,EAAO,CACdD,EAAS,MAAM,CAAE,MAAO,QAAS,QAASC,CAAK,CAAE,EACjDJ,EAAY,UAAU,IAAI,QAAQ,CACtC,QAAY,CACRD,EAAO,MAAM,QAAU,MACxB,CACH,CAEAF,EAAK,iBAAiB,SAAUQ,GAAS,CACvCA,EAAM,eAAc,EACpBJ,IACAC,GACF,CAAC,EAEDF,EAAY,iBAAiB,QAAS,IAAM,CAC1CE,GACF,CAAC"}