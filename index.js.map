{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/';\n\nexport const searchImages = async (text, page) => {\n  const response = await axios.get('api/', {\n    params: {\n      key: '48321806-d480a24496502db5d22ba5dda',\n      image_type: 'photo',\n      orientation: 'hotizontal',\n      safesearch: true,\n      q: text,\n      page: page,\n      per_page: 15,\n    },\n  });\n  return response.data;\n};\n","import { searchImages } from '/js/pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst options = {\n  searchString: '',\n  pageNumber: 1,\n  images: [],\n};\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-wrapper');\nconst loadMore = document.querySelector('#load-more');\nconst searchInut = document.querySelector('#search');\n\nfunction createGalleryItem(item) {\n  return `<li>\n  <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n  <img class=\"gallery-image\" src=\"${item.previewURL}\" alt=\"${item.tags}\"/>\n  <ul class=\"statistic\">\n  <li>\n  <h3 class=\"statistic-title\">Likes</h3>\n  <p class=\"statistic-text\">${item.likes}</p>\n  </li>\n  <li>\n  <h3 class=\"statistic-title\">Views</h3>\n  <p class=\"statistic-text\">${item.views}</p>\n  </li>\n  <li>\n  <h3 class=\"statistic-title\">Comments</h3>\n  <p class=\"statistic-text\">${item.comments}</p>\n  </li>\n  <li>\n  <h3 class=\"statistic-title\"> Downloads</h3>\n  <p class=\"statistic-text\">${item.downloads}</p>\n  </li>\n  </ul>\n  </a>\n  </li>`;\n}\n\nexport function reset(searchString) {\n  options.pageNumber = 1;\n  options.images = [];\n  options.searchString = searchString;\n  gallery.innerHTML = '';\n  searchInut.classList.remove('error');\n}\n\nexport function renderGallery() {\n  try {\n    if (!options.searchString) {\n      throw 'Search value can not be null';\n    }\n    loader.style.display = 'block';\n    const result = searchImages(options.searchString, options.pageNumber);\n    result\n      .then(data => {\n        options.images.push(...data.hits);\n        if (options.images.length == 0) {\n          throw 'Sorry, there are no images matching your search query. Please try again!';\n        }\n        const galleryItems = options.images\n          .map(item => {\n            return createGalleryItem(item);\n          })\n          .join('');\n        gallery.innerHTML = galleryItems;\n        lightbox.refresh();\n        options.pageNumber++;\n        scrol(gallery.children[gallery.children.length - 1]);\n        if (options.images.length < data.totalHits) {\n          loadMore.classList.remove('hidden');\n        } else {\n          loadMore.classList.add('hidden');\n          iziToast.info({\n            message:\n              \"We're sorry, but you've reached the end of search results.\",\n          });\n        }\n      })\n      .catch(error => {\n        iziToast.error({ title: 'Error', message: error });\n      })\n      .finally(() => {\n        loader.style.display = 'none';\n      });\n  } catch (error) {\n    searchInut.classList.add('error');\n    searchInut.focus;\n    iziToast.error({ message: error });\n  }\n}\n\nfunction scrol(li) {\n  const rect = li.getBoundingClientRect();\n  window.scrollBy({\n    top: rect.top,\n    height: rect.height,\n    behavior: 'smooth',\n  });\n}\n","import { renderGallery, reset } from './js/render-functions';\n\ndocument.querySelector('.search').addEventListener('input', event => {\n  reset(event.target.value);\n});\n\ndocument.querySelectorAll('.button').forEach(button =>\n  button.addEventListener('click', () => {\n    renderGallery();\n  })\n);\n"],"names":["axios","searchImages","text","page","lightbox","SimpleLightbox","options","gallery","loader","loadMore","searchInut","createGalleryItem","item","reset","searchString","renderGallery","data","galleryItems","scrol","iziToast","error","li","rect","event","button"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,uBAElB,MAAMC,EAAe,MAAOC,EAAMC,KACtB,MAAMH,EAAM,IAAI,OAAQ,CACvC,OAAQ,CACN,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,EAAGE,EACH,KAAMC,EACN,SAAU,EACX,CACL,CAAG,GACe,KCZZC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAU,CACd,aAAc,GACd,WAAY,EACZ,OAAQ,CAAE,CACZ,EAEMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAa,SAAS,cAAc,SAAS,EAEnD,SAASC,EAAkBC,EAAM,CAC/B,MAAO;AAAA,kCACyBA,EAAK,aAAa;AAAA,oCAChBA,EAAK,UAAU,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA,8BAIxCA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,8BAIVA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,8BAIVA,EAAK,QAAQ;AAAA;AAAA;AAAA;AAAA,8BAIbA,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA,QAK5C,CAEO,SAASC,EAAMC,EAAc,CAClCR,EAAQ,WAAa,EACrBA,EAAQ,OAAS,GACjBA,EAAQ,aAAeQ,EACvBP,EAAQ,UAAY,GACpBG,EAAW,UAAU,OAAO,OAAO,CACrC,CAEO,SAASK,GAAgB,CAC9B,GAAI,CACF,GAAI,CAACT,EAAQ,aACX,KAAM,+BAERE,EAAO,MAAM,QAAU,QACRP,EAAaK,EAAQ,aAAcA,EAAQ,UAAU,EAEjE,KAAKU,GAAQ,CAEZ,GADAV,EAAQ,OAAO,KAAK,GAAGU,EAAK,IAAI,EAC5BV,EAAQ,OAAO,QAAU,EAC3B,KAAM,2EAER,MAAMW,EAAeX,EAAQ,OAC1B,IAAIM,GACID,EAAkBC,CAAI,CAC9B,EACA,KAAK,EAAE,EACVL,EAAQ,UAAYU,EACpBb,EAAS,QAAO,EAChBE,EAAQ,aACRY,EAAMX,EAAQ,SAASA,EAAQ,SAAS,OAAS,CAAC,CAAC,EAC/CD,EAAQ,OAAO,OAASU,EAAK,UAC/BP,EAAS,UAAU,OAAO,QAAQ,GAElCA,EAAS,UAAU,IAAI,QAAQ,EAC/BU,EAAS,KAAK,CACZ,QACE,4DACd,CAAW,EAEX,CAAO,EACA,MAAMC,GAAS,CACdD,EAAS,MAAM,CAAE,MAAO,QAAS,QAASC,CAAK,CAAE,CACzD,CAAO,EACA,QAAQ,IAAM,CACbZ,EAAO,MAAM,QAAU,MAC/B,CAAO,CACJ,OAAQY,EAAO,CACdV,EAAW,UAAU,IAAI,OAAO,EAChCA,EAAW,MACXS,EAAS,MAAM,CAAE,QAASC,CAAO,CAAA,CAClC,CACH,CAEA,SAASF,EAAMG,EAAI,CACjB,MAAMC,EAAOD,EAAG,wBAChB,OAAO,SAAS,CACd,IAAKC,EAAK,IACV,OAAQA,EAAK,OACb,SAAU,QACd,CAAG,CACH,CCxGA,SAAS,cAAc,SAAS,EAAE,iBAAiB,QAASC,GAAS,CACnEV,EAAMU,EAAM,OAAO,KAAK,CAC1B,CAAC,EAED,SAAS,iBAAiB,SAAS,EAAE,QAAQC,GAC3CA,EAAO,iBAAiB,QAAS,IAAM,CACrCT,GACJ,CAAG,CACH"}